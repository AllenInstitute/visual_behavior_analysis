#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Thu Jul 18 14:55:22 2019

@author: farzaneh
"""

import sys
#sys.path.append('/allen/programs/braintv/workgroups/nc-ophys/nick.ponvert/src/pbstools')
#import platform
#if platform.system() == 'Linux':
#    sys.path.append('/allen/programs/braintv/workgroups/nc-ophys/Doug/pbstools')
from pbstools import PythonJob # flake8: noqa: E999

cache_dir = r'/allen/programs/braintv/workgroups/nc-ophys/visual_behavior/visual_behavior_production_analysis'
plot_roi_validation = False
# VisualBehaviorMultiscope , all valid experiments
experiment_ids = [951980471, 951980473, 951980475, 951980477, 951980479, 951980481,
       951980484, 951980486, 953659741, 953659743, 953659745, 953659747,
       953659749, 953659752, 953659754, 953659756, 958527464, 958527471,
       958527474, 958527477, 958527479, 958527481, 958527485, 958527488,
       956941841, 956941844, 956941846, 956941848, 956941851, 956941853,
       956941856, 956941858, 957759562, 957759564, 957759566, 957759568,
       957759570, 957759572, 957759574, 957759576, 958741219, 958741222,
       958741224, 958741226, 958741228, 958741230, 958741232, 958741234,
       959388788, 959388790, 959388792, 959388794, 959388796, 959388798,
       959388800, 959388802, 960410023, 960410026, 960410028, 960410032,
       960410035, 960410038, 960410040, 960410042, 971813754, 971813756,
       971813758, 971813760, 971813762, 971813765, 971813767, 971813769,
       972233173, 972233175, 972233181, 972233183, 972233187, 972233189,
       972233193, 972233195, 974433386, 974433388, 974433390, 974433392,
       974433395, 974433397, 974433399, 974433401, 974358967, 974358969,
       974358971, 974358973, 974358975, 974358977, 974358979, 974358981,
       974362751, 974362753, 974362756, 974362758, 974362760, 974362762,
       974362764, 974362767, 974994093, 974994095, 974994097, 974994099,
       974994101, 974994105, 974994107, 974994109, 975608388, 975608390,
       975608392, 975608394, 975608396, 975608398, 975608400, 975608402,
       976300293, 976300295, 976300297, 976300299, 976300301, 976300303,
       976300305, 976300307, 977247461, 977247464, 977247466, 977247468,
       977247470, 977247472, 977247474, 977247476, 977978314, 977978319,
       977978321, 977978323, 977978325, 977978327, 977978329, 977978331,
       978296098, 978296100, 978296102, 978296104, 978296106, 978296110,
       978296112, 978296114, 981178563, 981178565, 981178567, 981178571,
       981178574, 981178576, 981178579, 981178583, 981178524, 981178526,
       981178529, 981178532, 981178535, 981178537, 981178539, 981178542,
       982344767, 982344769, 982344771, 982344773, 982344775, 982344777,
       982344779, 982344781, 982343726, 982343728, 982343730, 982343732,
       982343734, 982343736, 982343738, 982343741, 982903841, 982903843,
       982903845, 982903847, 982903849, 982903851, 982903853, 982903855,
       982901275, 982901277, 982901281, 982901283, 982901285, 982901287,
       982901292, 982901296, 986518876, 986518878, 986518880, 986518885,
       986518887, 986518889, 986518891, 986518893, 986518819, 986518822,
       986518824, 986518829, 986518831, 986518833, 986518836, 986518838,
       986518843, 986518847, 986518852, 986518858, 986518861, 986518863,
       986518865, 986518870, 987320806, 987320808, 987320810, 987320812,
       987320814, 987320816, 987320818, 987320820, 988707113, 988707115,
       988707117, 988707119, 988707121, 988707124, 988707126, 988707128,
       989213058, 989213059, 989213060, 989213061, 989213062, 989213063,
       989213064, 989213065, 989212488, 989212489, 989212491, 989212492,
       989212493, 989212494, 989212495, 989212496, 989610985, 989610986,
       989610987, 989610988, 989610989, 989610990, 989610991, 989610992,
       990400775, 990400777, 990400778, 990400779, 990400780, 990400781,
       990400782, 990400783, 990681006, 990681007, 990681008, 990681009,
       990681010, 990681012, 990681013, 990681014, 991852000, 991852001,
       991852002, 991852003, 991852004, 991852005, 991852006, 991852008,
       992084624, 992084625, 992084626, 992084627, 992084628, 992084629,
       992084633, 992084635, 992620388, 992620390, 992620391, 992620392,
       992620393, 992620395, 992620396, 992620397, 993369857, 993369858,
       993369859, 993369860, 993369861, 993369862, 993369863, 993369864,
       993619364, 993619366, 993619367, 993619368, 993619369, 993619370,
       993619371, 993619372, 993891842, 993891843, 993891844, 993891845,
       993891846, 993891847, 993891849, 993891850, 994082671, 994082673,
       994082674, 994082676, 994082677, 994082679, 994082680, 994082683,
       1000744363, 1000744365, 1000744367, 1000744370, 1000744371,
       1000744373, 1000744374, 1000744376, 1002336289, 1002336291,
       1002336292, 1002336294, 1002336295, 1002336297, 1002336299,
       1002336301, 1005529394, 1005529397, 1005529398, 1005529400,
       1005529401, 1005529403, 1005529404, 1005529407]
# ['841968442', '841968440', '842545470', '845070860', '851093306',
#        '851093296', '851093302', '851093283', '856123130', '866518307',
#        '866518305', '870142227', '872499146', '881003500', '881003491',
#        '881003489', '882968577', '882968572', '882968570', '885146253',
#        '885146247', '887386985', '887386983', '888876953', '891108771',
#        '903485712', '916803634', '916803630', '916803628', '916803632',
#        '919418515', '919418511', '919418509', '920288857', '922122744',
#        '922122740', '922122738', '924198893', '925843773', '925843769',
#        '929655724', '932372713', '932372709', '932372703', '935514375',
#        '938002064', '939471252', '940433486', '948689200', '951213211',
#        '951213207', '951980479', '951980477', '953659754', '953659756',
#        '953659741', '953659747', '958741228', '958741224', '960410035',
#        '978296112', '981178583', '982903849', '982901292', '990681013',
#        '991852006', '991852005', '1005529404', '1005529401', '1005529403',
#        '1005529407', '1005529398', '1005529394']



#%% 
python_file = r"/home/farzaneh.najafi/analysis_codes/visual_behavior_analysis/visual_behavior/ophys/io/convert_level_1_to_level_2_pbs.py"

jobdir = '/allen/programs/braintv/workgroups/nc-ophys/Farzaneh/ClusterJobs/ConvertCode' # JobRecords1

job_settings = {'queue': 'braintv',
                'mem': '2g', # '24g'
                'walltime': '2:00:00', # 36:00:00
                'ppn': 1,
                'jobdir': jobdir,
                }

for experiment_id in experiment_ids:
    PythonJob(
        python_file,
        python_executable='/home/farzaneh.najafi/anaconda3/envs/visbeh/bin/python',
        python_args=experiment_id, #cache_dir, plot_roi_validation,
        conda_env=None,
        jobname='process_{}'.format(experiment_id),
        **job_settings
    ).run(dryrun=False)
    