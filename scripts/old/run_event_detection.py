import sys
import platform
if platform.system() == 'Linux':
    # sys.path.append('/allen/programs/braintv/workgroups/nc-ophys/Doug/pbstools')
    sys.path.append('/allen/programs/braintv/workgroups/nc-ophys/nick.ponvert/src/pbstools')
from pbstools import PythonJob # flake8: noqa: E999

# #VisualBehavior Mesoscope as of 3/20/19
# experiment_ids = [816242065, 816242073, 816242080, 816242091,
#        816242095, 816242105, 816242114, 816242121, 816571905, 816571911,
#        816571916, 816571919, 816571926, 816571929, 816571932, 816571934,
#        825516687, 825516689, 825516691, 825516694, 825516696, 825516700,
#        825516702, 825516706, 826334607, 826334610, 826334612, 826334616,
#        826334620, 826334623, 826334625, 826334627, 826794703, 826794707,
#        826794711, 826794714, 826794717, 826794723, 826794726, 826794730,
#        828144740, 828144742, 828144744, 828144746, 828144749, 828144751,
#        828144753, 828144755, 829269094, 829269096, 829269098, 829269100,
#        829269102, 829269104, 829269106, 829269108, 835653625, 835653627,
#        835653629, 835653631, 835653633, 835653635, 835653640, 835653642,
#        838486647, 838486649, 838486651, 838486653, 838486655, 838486657,
#        838486659, 838486661, 839716139, 839716141, 839716143, 839716145,
#        839716147, 839716149, 839716151, 839716153, 839716706, 839716708,
#        839716710, 839716712, 839716714, 839716716, 839716718, 839716720,
#        840460366, 840460368, 840460370, 840460372, 840460376, 840460378,
#        840460380, 840460383, 840717527, 840717529, 840717531, 840717534,
#        840717536, 840717538, 840717540, 840717542, 841624549, 841624552,
#        841624554, 841624556, 841624560, 841624564, 841624569, 841624576,
#        841968436, 841968438, 841968440, 841968442, 841968445, 841968447,
#        841968449, 841968452, 841969456, 841969458, 841969460, 841969462,
#        841969465, 841969467, 841969469, 841969471, 842545433, 842545435,
#        842545437, 842545439, 842545442, 842545444, 842545446, 842545448,
#        842545454, 842545456, 842545458, 842545462, 842545466, 842545468,
#        842545470, 842545472, 843007050, 843007052, 843007054, 843007056,
#        843007058, 843007061, 843007063, 843007065, 843534729, 843534731,
#        843534733, 843534736, 843534740, 843534742, 843534744, 843534746,
#        844420212, 844420214, 844420217, 844420220, 844420222, 844420224,
#        844420226, 844420229, 845070856, 845070858, 845070860, 845070862,
#        845070864, 845070866, 845070868, 845070870, 845777907, 845777909,
#        845777911, 845777913, 845777915, 845777918, 845777920, 845777922,
#        845783018, 845783021, 845783023, 845783025, 845783027, 845783030,
#        845783032, 845783034, 846546326, 846546328, 846546331, 846546333,
#        846546335, 846546337, 846546339, 846546341, 847267616, 847267618,
#        847267620, 847267622, 847267624, 847267626, 847267628, 847267630,
#        848039110, 848039113, 848039115, 848039117, 848039119, 848039121,
#        848039123, 848039125, 848760957, 848760959, 848760961, 848760963,
#        848760965, 848760967, 848760969, 848760971, 848760974, 848760977,
#        848760979, 848760981, 848760983, 848760985, 848760988, 848760990,
#        849233390, 849233392, 849233394, 849233396, 849233398, 849233400,
#        849233402, 849233404, 850517344, 850517346, 850517348, 850517350,
#        850517352, 850517354, 850517356, 850517358, 851085092, 851085095,
#        851085098, 851085100, 851085103, 851085105, 851085107, 851085109,
#        851093283, 851093285, 851093287, 851093289, 851093291, 851093296,
#        851093302, 851093306, 851958793, 851958795, 851958797, 851958800,
#        851958802, 851958805, 851958807, 851958809, 851959317, 851959320,
#        851959322, 851959324, 851959326, 851959329, 851959331, 851959333,
#        852730503, 852730505, 852730508, 852730510, 852730514, 852730516,
#        852730518, 852730520, 853362765, 853362767, 853362769, 853362771,
#        853362773, 853362775, 853362777, 853362780, 853363739, 853363743,
#        853363745, 853363747, 853363749, 853363751, 853363753, 853363756,
#        853988430, 853988435, 853988437, 853988444, 853988446, 853988448,
#        853988450, 853988454, 854759890, 854759894, 854759896, 854759898,
#        854759900, 854759903, 854759905, 854759907, 856123117, 856123119,
#        856123122, 856123124, 856123126, 856123130, 856123132, 856123134,
#        856967230, 856967232, 856967234, 856967237, 856967241, 856967243,
#        856967245, 856967247]

# VisualBehavior Scientifica as of 6/11/19
experiment_ids = [775614751, 778644591, 783927872, 783928214, 784482326, 787498309,
       787501821, 788488596, 788489531, 788490510, 789359614, 790149413,
       790709081, 791119849, 791453282, 791453299, 792812544, 792813858,
       792815735, 792816531, 794378505, 794381992, 795073741, 795075034,
       795076128, 795948257, 795952471, 795952488, 795953296, 796105304,
       796105823, 796106321, 796106850, 796108483, 796306417, 796308505,
       797255551, 798392580, 798403387, 798404219, 799366517, 799368262,
       799368904, 803736273, 805100431, 805784313, 805784331, 806455766,
       806456687, 806989729, 807752719, 807753318, 807753334, 807753920,
       808619543, 808621015, 808621034, 808621958, 809497730, 809501118,
       811456530, 811458048, 813083478, 815652334, 817267785, 817267860,
       819432482, 820307042, 820307518, 821011078, 822024770, 822028017,
       822641265, 822647116, 822647135, 822656725, 823392290, 823396897,
       825120601, 825130141, 825623170, 826583436, 826585773, 826587940,
       830093338, 830700781, 830700800, 831330404, 832117336, 833629926,
       833629942, 833631914, 834275020, 834275038, 834279496, 836258936,
       836258957, 836260147, 836910438, 836911939, 837296345, 837729902,
       838849930, 840157581, 840702910, 840705705, 841601446, 841948542,
       841951447, 842513687, 842973730, 842975542, 843519218, 843520488,
       844395446, 845037476, 846487947, 846490568, 847125577, 847241639,
       848006184, 848692970, 848694045, 848694639, 848697604, 848697625,
       848698709, 849199228, 849203565, 849203586, 850479305, 850489605,
       851056106, 851060467, 851932055, 852691524, 853328115, 853962951,
       853962969, 853965818, 854703305, 855577488, 855582961, 855582981,
       856096766, 859147033, 862023618, 862848066, 862848084, 863735602,
       864370674, 866463736, 867337243, 868900909, 868905381, 868911434,
       869969393, 869972431, 871159631, 872436745, 873968820, 873972085,
       875045489, 877018118, 877022592, 877696762, 877697554, 878358326,
       878363070, 878363088, 879331157, 879332693, 880374622, 880375092,
       880961028, 882520593]

# VIP expts as of 6/11

experiment_ids = [836911939, 836258957, 833631914, 830700800, 830093338, 826587940,
       809497730, 808621958, 807753318, 805784331, 803736273, 798392580,
       798404219, 796308505, 796108483, 795953296, 795073741, 792815735]

python_file = r"/home/marinag/visual_behavior_analysis/scripts/event_detection.py"

jobdir = '/allen/programs/braintv/workgroups/nc-ophys/Marina/ClusterJobs/JobRecords'

job_settings = {'queue': 'braintv',
                'mem': '200g',
                'walltime': '40:00:00',
                'ppn': 1,
                'jobdir': jobdir,
                }

for experiment_id in experiment_ids:
    PythonJob(
        python_file,
        python_executable='/home/marinag/anaconda2/envs/visual_behavior_sdk/bin/python',
        python_args=experiment_id,
        conda_env=None,
        jobname='process_{}'.format(experiment_id),
        **job_settings
    ).run(dryrun=False)
