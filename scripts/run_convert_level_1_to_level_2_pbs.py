import sys
import platform
if platform.system() == 'Linux':
    sys.path.append('/allen/programs/braintv/workgroups/nc-ophys/Doug/pbstools')
from pbstools import PythonJob # flake8: noqa: E999

# #VisualBehaviorDevelopment - complete dataset as of 11/15/18
# lims_ids = [639253368, 639438856, 639769395, 639932228, 644942849, 645035903,
#        645086795, 645362806, 646922970, 647108734, 647551128, 647887770,
#        648647430, 649118720, 649318212, 661423848, 663771245, 663773621,
#        664886336, 665285900, 665286182, 670396087, 671152642, 672185644,
#        672584839, 673139359, 673460976, 685744008, 686726085, 692342909,
#        692841424, 693272975, 693862238, 695471168, 696136550, 698244621,
#        698724265, 700914412, 701325132, 702134928, 702723649, 712178916,
#        712860764, 713525580, 714126693, 715161256, 715228642, 715887471,
#        715887497, 716327871, 716337289, 716600289, 716602547, 719321260,
#        719996589, 720001924, 720793118, 723037901, 723064523, 723748162,
#        723750115, 729951441, 730863840, 731936595, 732911072, 733691636,
#        736490031, 736927574, 737471012, 745353761, 745637183, 747248249,
#        750469573, 751935154, 752966796, 753931104, 754552635, 754566180,
#        754943841, 756715598, 758274779, 760003838, 760400119, 760696146,
#        760986090, 761861597, 762214438, 762214650, 766779984, 767424894,
#        768223868, 768224465, 768225217, 768865460, 768871217, 769514560,
#        770094844, 771381093, 771427955, 772131949, 772696884, 772735942,
#        773816712, 773843260, 774370025, 774379465, 775011398, 775429615,
#        776042634]

#VisualBehavior production as of 3/20/19
#  experiment_ids = [775614751, 778644591, 782675436, 783927872, 783928214, 784482326,
#             787461073, 787498309, 787501821, 788488596, 788489531, 788490510,
#             789359614, 790149413, 790709081, 791119849, 791453282,
#             791980891, 792812544, 792813858, 792815735, 792816531, 794378505,
#             794381992, 795073741, 795075034, 795076128, 795948257, 795952471,
#             795952488, 795953296, 796105304, 796105823, 796106321, 796106850,
#             796108483, 796306417, 796308505, 797255551, 798392580, 798403387,
#             798404219, 799366517, 799368262, 799368904, 803736273, 805100431,
#             805784313, 805784331, 806455766, 806456687, 806989729, 807752719,
#             807753318, 807753334, 807753920, 808619543, 808621015, 808621034,
#             808621958, 809497730, 809501118, 811456530, 811458048, 813083478,
#             814610580, 815097949, 815652334, 817267785, 817267860, 818073631,
#             819432482, 819434449, 820307518, 822024770,
#             822028017, 822028587, 822641265, 822647116, 822647135, 822656725,
#             823392290, 823396897, 823401226, 824333777, 825120601, 825130141,
#             825623170, 826583436, 826585773, 826587940, 830093338, 830700781,
#             830700800, 831330404, 832117336, 833629926, 833629942, 833631914,
#             834275020, 834275038, 834279496, 836258936, 836258957, 836260147,
#             836910438, 836911939, 837296345, 837729902, 838849930]

# Behavior modeling Thursday Harbor group
experiment_ids = [837729902, 838849930, 836910438, 840705705, 840157581,
                  841601446, 840702910, 841948542, 841951447, 842513687,
                  842973730, 843519218, 846490568, 847125577, 848697604] 


python_file = r"/home/nick.ponvert/src/visual_behavior_analysis/scripts/convert_level_1_to_level_2.py"

#  jobdir = '/allen/programs/braintv/workgroups/nc-ophys/Marina/ClusterJobs/JobRecords2'
jobdir = '/allen/programs/braintv/workgroups/nc-ophys/nick.ponvert/cluster_jobs'

job_settings = {'queue': 'braintv',
                'mem': '30g',
                'walltime': '5:00:00',
                'ppn': 1,
                'jobdir': jobdir,
                }

for experiment_id in experiment_ids:
    PythonJob(
        python_file,
        python_executable='/home/marinag/anaconda2/envs/visual_behavior_ophys/bin/python',
        python_args=experiment_id,
        conda_env=None,
        jobname='process_{}'.format(experiment_id),
        **job_settings
    ).run(dryrun=False)
