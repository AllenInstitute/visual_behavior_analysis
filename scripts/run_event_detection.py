import sys
import platform
if platform.system() == 'Linux':
    # sys.path.append('/allen/programs/braintv/workgroups/nc-ophys/Doug/pbstools')
    sys.path.append('/allen/programs/braintv/workgroups/nc-ophys/nick.ponvert/src/pbstools')
from pbstools import PythonJob # flake8: noqa: E999

# Mesoscope 4x2 as of 11/16/19
experiment_ids = [959389424, 959389426, 959389428, 959389431, 959389434, 959389436, 959389438, 959389440,
960405649, 960405651, 960405653, 960405655, 960405657, 960405659, 960405661, 960405663,
960995093, 960995095, 960995097, 960995099, 960995101, 960995103, 960995105, 960995107,
962676798, 962676800, 962676802, 962676805, 962676807, 962676811, 962676815, 962676817,
963448995, 963448999, 963449001, 963449003, 963449005, 963449007, 963449009, 963449011,
964615743, 964615746, 964615749, 964615753, 964615755, 964615757, 964615760, 964615764,
965270761, 965270764, 965270766, 965270769, 965270771, 965270773, 965270778, 965270780,
957761407, 957761409, 957761411, 957761413, 957761415, 957761417, 957761419, 957761421,
964615767, 964615769, 964615771, 964615773, 964615775, 964615777, 964615779, 964615781,
965267329, 965267331, 965267333, 965267335, 965267337, 965267339, 965267341, 965267343,
965980147, 965980150, 965980152, 965980154, 965980156, 965980158, 965980160, 965980162,
967039545, 967039547, 967039549, 967039551, 967039553, 967039555, 967039557, 967039559,
967906375, 967906377, 967906379, 967906381, 967906385, 967906387, 967906390, 967906392,
968717796, 968717798, 968717800, 968717802, 968717804, 968717806, 968717808, 968717810,
969841035, 969841037, 969841039, 969841041, 969841043, 969841045, 969841047, 969841049,
970223731, 970223733, 970223735, 970223738, 970223740, 970223742, 970223744, 970223746,
966323512, 966323514, 966323516, 966323518, 966323521, 966323523, 966323525, 966323527,
967040449, 967040451, 967040454, 967040458, 967040460, 967040462, 967040464, 967040466,
969430840, 969430843, 969430845, 969430847, 969430849, 969430851, 969430853, 969430855,
969841053, 969841055, 969841057, 969841059, 969841061, 969841063, 969841065, 969841067,
972233198, 972233200, 972233202, 972233204, 972233207, 972233209, 972233211, 972233213,
972760498, 972760500, 972760502, 972760504, 972760506, 972760508, 972760510, 972760513,
974434621, 974434623, 974434625, 974434627, 974434630, 974434632, 974434634, 974434636,
974434601, 974434603, 974434605, 974434607, 974434609, 974434611, 974434614, 974434617,
975608406, 975608408, 975608410, 975608412, 975608414, 975608416, 975608418, 975608420,
976300311, 976300313, 976300315, 976300317, 976300319, 976300321, 976300323, 976300325,
977220481, 977220483, 977220485, 977220487, 977220489, 977220491, 977220493, 977220495,
977975790, 977975792, 977975794, 977975796, 977975798, 977975800, 977975802, 977975804,
978284048, 978284050, 978284052, 978284054, 978284056, 978284060, 978284062, 978284064,
978866896, 978866898, 978866900, 978866902, 978866904, 978866906, 978866908, 978866910,
979726720, 979726722, 979726725, 979726727, 979726729, 979726731, 979726733, 979726736]



python_file = r"/home/marinag/visual_behavior_analysis/scripts/event_detection.py"

jobdir = '/allen/programs/braintv/workgroups/nc-ophys/Marina/ClusterJobs/JobRecords'

job_settings = {'queue': 'braintv',
                'mem': '80g',
                'walltime': '24:00:00',
                'ppn': 1,
                'jobdir': jobdir,
                }

for experiment_id in experiment_ids:
    print experiment_id
    PythonJob(
        python_file,
        python_executable='/home/marinag/anaconda2/envs/visual_behavior_sdk/bin/python',
        python_args=experiment_id,
        conda_env=None,
        jobname='process_{}'.format(experiment_id),
        **job_settings
    ).run(dryrun=False)
